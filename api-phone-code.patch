From de38d36f9faf42ed19f7d886e9ca4e76e898b949 Mon Sep 17 00:00:00 2001
From: Claude <noreply@anthropic.com>
Date: Mon, 10 Nov 2025 12:27:25 +0000
Subject: [PATCH] Add phone_code validator for invitation API

- Accept phone_code field (1-4 digits)
- Validates international dialing codes from UI
- No transformation logic needed in backend

Bug #3 fix (email dots) was already committed previously.
---
 src/validators/invitation.ts | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/validators/invitation.ts b/src/validators/invitation.ts
index 4ae7157..ff5e653 100644
--- a/src/validators/invitation.ts
+++ b/src/validators/invitation.ts
@@ -21,6 +21,11 @@ export const createInvitationValidation: ValidationChain[] = [
     .isString().withMessage('Country code must be a string')
     .isLength({ min: 2, max: 2 }).withMessage('Country code must be 2 characters (ISO code)'),
 
+  body('phone_code')
+    .optional()
+    .isString().withMessage('Phone code must be a string')
+    .matches(/^\d{1,4}$/).withMessage('Phone code must be 1-4 digits'),
+
   body('invitation_method')
     .optional()
     .isIn(['email', 'sms', 'whatsapp']).withMessage('Invalid invitation method'),
-- 
2.43.0

