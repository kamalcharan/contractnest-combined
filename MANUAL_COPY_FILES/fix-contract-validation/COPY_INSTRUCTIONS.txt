===============================================
COPY INSTRUCTIONS -- fix-contract-validation
===============================================

Feature: Fix contract creation - validation errors + title/name mapping
Branch: fix-contract-validation

Submodules Affected: contractnest-ui, contractnest-api

Files (3 total):
-------------------------------------------------
1. contractnest-api/src/controllers/contractController.ts
   - Debug logging removed (back to clean state)

2. contractnest-api/src/services/contractService.ts
   - Maps 'title' -> 'name' before forwarding to edge function (DB RPC expects 'name')
   - Applied to both createContract and updateContract methods

3. contractnest-ui/src/components/contracts/ContractWizard/index.tsx
   - Full payload remap to match deployed DB RPC schema (flattened blocks/vendors)
   - Omit contract_type (API validates pricing types; wizard sends relationship type via contact_classification)
   - Fixed acceptance_method mapping: payment->manual, signoff->digital_signature
   - Fly-by blocks: source_type='flyby', no source_block_id, originalId in custom_fields
   - Catalog blocks: source_type='catalog', source_block_id=UUID
   - Vendors use contact_id + contact_classification pattern
   - Buyer uses contact_id + contact_classification at top level

Copy Commands (PowerShell):
-------------------------------------------------
Copy-Item "MANUAL_COPY_FILES\fix-contract-validation\contractnest-api\src\controllers\contractController.ts" -Destination "contractnest-api\src\controllers\contractController.ts" -Force
Copy-Item "MANUAL_COPY_FILES\fix-contract-validation\contractnest-api\src\services\contractService.ts" -Destination "contractnest-api\src\services\contractService.ts" -Force
Copy-Item "MANUAL_COPY_FILES\fix-contract-validation\contractnest-ui\src\components\contracts\ContractWizard\index.tsx" -Destination "contractnest-ui\src\components\contracts\ContractWizard\index.tsx" -Force
