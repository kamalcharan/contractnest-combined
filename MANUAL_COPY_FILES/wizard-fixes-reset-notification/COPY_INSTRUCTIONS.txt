â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ CHANGES SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Branch: claude/init-submodules-docs-ie8vH
Feature: Wizard Fixes â€” Notification Note, Change Client, Reset on Close/Cancel

Files Changed:
  - contractnest-ui/src/components/contracts/ContractWizard/index.tsx
      â†’ Extract createInitialWizardState() factory
      â†’ Add resetWizard() + handleClose() functions
      â†’ Wire handleClose to X button, backdrop, FloatingActionIsland
      â†’ handleDone calls resetWizard before onClose
      â†’ Pass acceptanceMethod prop to BuyerSelectionStep

  - contractnest-ui/src/components/contracts/ContractWizard/steps/BuyerSelectionStep.tsx
      â†’ Add isChangingBuyer state flag
      â†’ Guard useEffect (fullContactData) with !isChangingBuyer
      â†’ Clear flag on new contact selection

Submodules Affected: contractnest-ui

Production Checklist:
  âœ… Transaction Management: N/A (no DB operations)
  âœ… Race Condition Handling: Yes â€” isChangingBuyer guard prevents useEffect re-populating cleared contact
  âœ… Error Handling: Yes â€” existing error handling preserved
  âœ… Toasts: Yes â€” existing toasts preserved (buyer selected, contact person selected, etc.)
  âœ… Loaders: Yes â€” existing loader states preserved

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’» PHASE 1: COPY FILES FOR LOCAL TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: Navigate to Project
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd "D:\projects\core projects\ContractNest\contractnest-combined"

STEP 2: Copy Files from MANUAL_COPY_FILES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Copy-Item "MANUAL_COPY_FILES\wizard-fixes-reset-notification\contractnest-ui\src\components\contracts\ContractWizard\index.tsx" -Destination "contractnest-ui\src\components\contracts\ContractWizard\index.tsx" -Force

Copy-Item "MANUAL_COPY_FILES\wizard-fixes-reset-notification\contractnest-ui\src\components\contracts\ContractWizard\steps\BuyerSelectionStep.tsx" -Destination "contractnest-ui\src\components\contracts\ContractWizard\steps\BuyerSelectionStep.tsx" -Force

Write-Host "âœ… All files copied!" -ForegroundColor Green

STEP 3: Start Dev Server & Test
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd contractnest-ui
npm run dev

# Hard refresh browser: Ctrl+F5

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Fix #2 â€” Notification Note (below client card on Step 3):
- [ ] Payment acceptance â†’ select client â†’ shows "An email for payment will be sent to @email"
- [ ] Signoff acceptance â†’ select client â†’ shows "Contract view + PDF will be emailed to @email"
- [ ] Auto Accept â†’ select client â†’ shows green "Auto-Accept Enabled" note
- [ ] WhatsApp line appears if client has whatsapp channel configured
- [ ] Warning shown if client has no email/whatsapp configured

Fix #3 â€” Change Client:
- [ ] Select a client â†’ click "Change" â†’ contact card disappears, search list shows
- [ ] After changing, select a different client â†’ works normally, full data loads

Fix #4 â€” Cancel Reset:
- [ ] Fill wizard to step 4+ â†’ click Cancel in footer â†’ reopen wizard â†’ starts fresh at step 1
- [ ] All fields cleared (name, client, blocks, etc.)

Fix #5 â€” Close (X) Reset:
- [ ] Fill wizard to step 4+ â†’ click X top-right â†’ reopen wizard â†’ starts fresh at step 1
- [ ] Click backdrop (dark overlay) â†’ reopen wizard â†’ starts fresh at step 1

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â¸ï¸ WAITING FOR CONFIRMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Test locally and confirm:
  â†’ "Tested, working - proceed with merge"
  â†’ "Issue found: [describe problem]"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
