═══════════════════════════════════════════════════════════════════════════════
FIX: Configure Page + UUID vs String Block Type Mismatch
═══════════════════════════════════════════════════════════════════════════════

ISSUES FIXED:

1. Configure page was not converting API response (CatBlock) to UI format (Block)
   - This caused categoryId to be undefined, resulting in 0 blocks showing

2. UUID vs String mismatch for block_type_id
   - Database stored block_type_id as UUID (e.g., "ae7050b4-3cca-4ed9-aa02-4a1f697b75cc")
   - Frontend BLOCK_CATEGORIES used string IDs (e.g., "service", "spare")
   - Filtering never matched because UUID ≠ 'service'

SOLUTION:

1. Edge Function (cat-blocks/index.ts):
   - Added enrichBlocksWithTypeNames() to look up block type names from m_category_details
   - Each block now includes block_type_name ('service', 'spare', etc.) alongside block_type_id (UUID)
   - Also resolves string → UUID on CREATE (so frontend can send 'service', edge resolves to UUID)

2. Adapter (catBlockAdapter.ts):
   - Now uses block_type_name as categoryId instead of block_type_id UUID
   - Falls back to block_type_id for backwards compatibility

3. Configure page (configure.tsx):
   - Added catBlocksToBlocks adapter import and useMemo conversion

═══════════════════════════════════════════════════════════════════════════════
FILES TO COPY
═══════════════════════════════════════════════════════════════════════════════

EDGE FUNCTION:
Source: MANUAL_COPY_FILES/fix-configure-adapter/contractnest-edge/
Target: contractnest-edge/

  - supabase/functions/cat-blocks/index.ts

UI FILES:
Source: MANUAL_COPY_FILES/fix-configure-adapter/contractnest-ui/
Target: contractnest-ui/

  - src/pages/catalog-studio/configure.tsx
  - src/utils/catalog-studio/catBlockAdapter.ts

═══════════════════════════════════════════════════════════════════════════════
DEPLOYMENT NOTES
═══════════════════════════════════════════════════════════════════════════════

After copying edge function:
  - Deploy to Supabase: supabase functions deploy cat-blocks

After copying UI files:
  - Restart dev server: npm run dev
  - Hard refresh browser: Ctrl+F5

═══════════════════════════════════════════════════════════════════════════════
