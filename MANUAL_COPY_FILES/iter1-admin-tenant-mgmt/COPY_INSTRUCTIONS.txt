===============================================================
ITERATION 1: Admin Tenant Management - Real Tenant List + Stats
+ is_test badge (Test Account / Live Account)
===============================================================

Submodules Affected: contractnest-edge, contractnest-api, contractnest-ui

FILES TO COPY:
---------------------------------------------------------------

--- EDGE FUNCTION (contractnest-edge) ---

1. MODIFIED: supabase/migrations/admin-tenant-management/001_admin_tenant_rpcs.sql
   -> SQL RPC functions: get_admin_platform_stats() + get_admin_tenant_list()
   -> NOW INCLUDES is_test field in tenant list response
   -> RE-RUN THIS IN SUPABASE SQL EDITOR (for is_test addition)

2. supabase/functions/admin-tenant-management/index.ts
   -> Edge function: GET /stats, GET /tenants
   -> Pattern: matches plans/index.ts (simple auth, no signing)

--- API LAYER (contractnest-api) ---

3. src/services/adminTenantService.ts
   -> Service that proxies to edge function (simple headers, no signing)

4. src/routes/adminTenantRoutes.ts
   -> Express routes: GET /api/admin/tenants/stats, GET /api/admin/tenants/list

5. src/index.ts
   -> Added route registration for /api/admin/tenants

--- UI (contractnest-ui) ---

6. src/services/serviceURLs.ts
   -> Added ADMIN.TENANT_MANAGEMENT endpoints + AdminTenantListFilters type

7. src/pages/admin/subscription-management/index.tsx
   -> Wired loadData() to real API, falls back to mock on failure

8. NEW: src/types/tenantManagement.ts
   -> Added is_test: boolean to TenantListItem interface

9. MODIFIED: src/components/subscription/cards/TenantCard.tsx
   -> Added Test Account / Live Account badge in Status Badges section
   -> Amber for test, green for live

POWERSHELL COPY COMMANDS:
---------------------------------------------------------------

cd "D:\projects\core projects\ContractNest\contractnest-combined"

# Edge
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-edge\supabase\migrations\admin-tenant-management\001_admin_tenant_rpcs.sql" -Destination "contractnest-edge\supabase\migrations\admin-tenant-management\001_admin_tenant_rpcs.sql" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-edge\supabase\functions\admin-tenant-management\index.ts" -Destination "contractnest-edge\supabase\functions\admin-tenant-management\index.ts" -Force

# API
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-api\src\services\adminTenantService.ts" -Destination "contractnest-api\src\services\adminTenantService.ts" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-api\src\routes\adminTenantRoutes.ts" -Destination "contractnest-api\src\routes\adminTenantRoutes.ts" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-api\src\index.ts" -Destination "contractnest-api\src\index.ts" -Force

# UI
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-ui\src\services\serviceURLs.ts" -Destination "contractnest-ui\src\services\serviceURLs.ts" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-ui\src\pages\admin\subscription-management\index.tsx" -Destination "contractnest-ui\src\pages\admin\subscription-management\index.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-ui\src\types\tenantManagement.ts" -Destination "contractnest-ui\src\types\tenantManagement.ts" -Force
Copy-Item "MANUAL_COPY_FILES\iter1-admin-tenant-mgmt\contractnest-ui\src\components\subscription\cards\TenantCard.tsx" -Destination "contractnest-ui\src\components\subscription\cards\TenantCard.tsx" -Force

DEPLOYMENT ORDER:
---------------------------------------------------------------
1. Re-run SQL migration in Supabase SQL Editor (for is_test field)
2. Copy UI files (API + edge unchanged from last deploy)
3. Hard refresh browser: Ctrl+F5
4. Test at /admin/subscription-management
