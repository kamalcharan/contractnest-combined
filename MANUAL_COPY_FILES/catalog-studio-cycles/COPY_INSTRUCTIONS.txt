═══════════════════════════════════════════════════════════════════════════════
CATALOG STUDIO - ALL WIZARD STEPS UPDATED
═══════════════════════════════════════════════════════════════════════════════

Branch: catalog-studio-cycles
Date: January 2025
Version: 5.0 (Added RulesStep hidden + BusinessRulesStep update)

───────────────────────────────────────────────────────────────────────────────
FILES CHANGED
───────────────────────────────────────────────────────────────────────────────

1. DeliveryStep.tsx
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/service/
   Changes:
   - HIDDEN: On-Site Settings, Virtual Settings, Scheduling Options
   - REDESIGNED: Two-column layout for Service Cycles
   - ADDED: Service Cycles feature (Yes/No toggle, cycle days, grace period)

2. PricingStep.tsx
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/service/
   Changes:
   - HIDDEN: Tiered pricing, Quote pricing, Discount Options
   - REDESIGNED: Two-column layout with green tips card
   - SHOWS: Only Fixed Price and Hourly Rate options

3. EvidenceStep.tsx
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/service/
   Changes:
   - HIDDEN: Before Photo, After Photo, Customer Signature, GPS, Time Tracking, Service Report
   - HIDDEN: Photo Settings section
   - SHOWS: Only 3 options: Upload Form, OTP Confirmation, Service Form
   - REDESIGNED: Two-column layout with blue tips card

4. RulesStep.tsx (HIDDEN)
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/service/
   Changes:
   - COMPLETELY HIDDEN: Returns empty placeholder
   - Original code preserved as comments

5. BusinessRulesStep.tsx (UPDATED - Now used for Step 6)
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/service/
   Changes:
   - SHOWS: Free Follow-up section (mandatory fields when enabled)
   - SHOWS: Warranty section (mandatory fields when enabled, text control for terms)
   - HIDDEN: Cancellation Policy section
   - HIDDEN: Reschedule Rules section
   - HIDDEN: Auto-approve, Require OTP options
   - SHOWS: Only "Require Advance Deposit" in payment options
   - REDESIGNED: Two-column layout with amber tips card
   - REMOVED: Price for additional followup field

6. BlockWizardContent.tsx
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/
   Changes:
   - Updated Step 6 to use BusinessRulesStep instead of RulesStep

7. WizardFooter.tsx
   Location: contractnest-ui/src/components/catalog-studio/BlockWizard/
   Changes:
   - Back button: Gray background + border
   - Save Draft: Amber/yellow themed with Save icon
   - Continue: Shadow + hover lift effect

───────────────────────────────────────────────────────────────────────────────
SUBMODULES AFFECTED
───────────────────────────────────────────────────────────────────────────────

- contractnest-ui

───────────────────────────────────────────────────────────────────────────────
COPY COMMAND (PowerShell)
───────────────────────────────────────────────────────────────────────────────

cd "D:\projects\core projects\ContractNest\contractnest-combined"

Copy-Item "MANUAL_COPY_FILES\catalog-studio-cycles\contractnest-ui\*" -Destination "contractnest-ui\" -Recurse -Force

Write-Host "✅ All files copied!" -ForegroundColor Green

───────────────────────────────────────────────────────────────────────────────
GIT PULL COMMAND (Alternative to Copy)
───────────────────────────────────────────────────────────────────────────────

cd "D:\projects\core projects\ContractNest\contractnest-combined"
git fetch origin claude/review-catalog-studio-specs-XVcAF
git checkout claude/review-catalog-studio-specs-XVcAF
git pull origin claude/review-catalog-studio-specs-XVcAF

───────────────────────────────────────────────────────────────────────────────
BUSINESS RULES STEP UI
───────────────────────────────────────────────────────────────────────────────

┌─────────────────────────────────────┬──────────────────────────────┐
│  LEFT COLUMN (60%)                  │  RIGHT COLUMN (40%)          │
│  ─────────────────────────          │  ───────────────────         │
│  • Free Follow-up Section           │  • Business Rules Guide      │
│    - Toggle on/off                  │    - Amber themed card       │
│    - Free Followups (mandatory *)   │    - Follow-up info          │
│    - Valid For (mandatory *)        │    - Warranty info           │
│    - Period unit (mandatory *)      │    - Advance Deposit info    │
│    - Conditions (optional)          │                              │
│                                     │  • Best Practices            │
│  • Warranty Section                 │    - Service tips            │
│    - Toggle on/off                  │                              │
│    - Period (mandatory *)           │  • Required Fields           │
│    - Unit (mandatory *)             │    - Field requirements      │
│    - Type (mandatory *)             │                              │
│    - Terms (mandatory * - textarea) │                              │
│                                     │                              │
│  • Payment Options                  │                              │
│    - Require Advance Deposit only   │                              │
│    - Deposit Amount (%)             │                              │
└─────────────────────────────────────┴──────────────────────────────┘

───────────────────────────────────────────────────────────────────────────────
HIDDEN FEATURES (Code preserved, commented out)
───────────────────────────────────────────────────────────────────────────────

RulesStep (entire component hidden):
- Cancellation Policy
- Rescheduling Rules
- Verification & Security
- Automation & Notifications
- SLA section

BusinessRulesStep hidden items:
- Cancellation Policy section
- Reschedule Rules section
- Auto-approve bookings option
- Require OTP verification option
- Price for additional followup field

EvidenceStep:
- Before Photo, After Photo
- Customer Signature
- GPS Location, Time Tracking, Service Report
- Photo Settings section

PricingStep:
- Tiered pricing, Quote pricing
- Discount Options section

DeliveryStep:
- On-Site Settings, Virtual Settings
- Scheduling Options

───────────────────────────────────────────────────────────────────────────────
NEW/UPDATED FORM DATA FIELDS
───────────────────────────────────────────────────────────────────────────────

BusinessRulesStep (formData.meta):
  followup: {
    enabled: boolean;
    freeFollowups: number;      // mandatory when enabled
    followupPeriod: number;     // mandatory when enabled
    followupPeriodUnit: string; // mandatory when enabled
    conditions: string[];
  }
  warranty: {
    enabled: boolean;
    warrantyPeriod: number;     // mandatory when enabled
    warrantyPeriodUnit: string; // mandatory when enabled
    warrantyType: string;       // mandatory when enabled
    warrantyTerms: string;      // mandatory when enabled (textarea)
  }
  requiresDeposit: boolean;
  depositPercentage: number;    // mandatory when deposit enabled

EvidenceStep:
  selectedServiceForm?: string;

DeliveryStep:
  requiresCycles?: boolean;
  cycleDays?: number;
  cycleGracePeriod?: number;

───────────────────────────────────────────────────────────────────────────────
FUTURE CONSIDERATION: SIDE WIZARD LAYOUT
───────────────────────────────────────────────────────────────────────────────

Noted for future implementation.

═══════════════════════════════════════════════════════════════════════════════
