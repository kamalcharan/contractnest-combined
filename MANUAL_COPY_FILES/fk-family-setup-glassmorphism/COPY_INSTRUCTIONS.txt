â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ FAMILY SETUP SCREEN - GLASSMORPHISM DESIGN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Branch: fk-family-setup-glassmorphism
Date: January 2025

Submodules Affected: FamilyKnows

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ FILES CREATED/MODIFIED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NEW FILES:
1. FamilyKnows/src/hooks/useRelationships.ts
   - Hook to fetch family relationships from masterdata API
   - Uses /api/masterdata/categories to find Roles category
   - Falls back to default relationships if API fails

2. FamilyKnows/src/hooks/useInvitations.ts
   - Hook for managing invitations (create, resend, cancel)
   - Uses existing /api/users/invitations endpoints
   - Manages loading states and error handling

3. FamilyKnows/src/features/onboarding/screens/FamilySetupScreen.tsx
   - COMPLETE REWRITE with glassmorphism constellation design
   - Screen 1: Management mode (for settings)
   - Screen 2: Constellation mode (for onboarding)
   - Real API integration replacing mock data

MODIFIED FILES:
4. FamilyKnows/src/services/api.ts
   - ADD MASTERDATA endpoints (see api.ts.patch)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ DESIGN FEATURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONSTELLATION MODE (Onboarding):
- Animated center orb with workspace name
- 6 floating relationship bubbles (Mom, Dad, Spouse, etc.)
- Tap bubble â†’ opens invite modal
- WhatsApp/Email/SMS invite options
- Glassmorphism styling with blur effects

MANAGEMENT MODE (Settings):
- Glass card with active members list
- Pending invitations with "Nudge" button
- Add Member / Share Hub action buttons
- Avatar rings with gradient borders

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’» PHASE 1: COPY FILES FOR LOCAL TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: Navigate to Project
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd "D:\projects\core projects\ContractNest\contractnest-combined"

STEP 2: Copy New Hook Files
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Create hooks directory if it doesn't exist
mkdir -p FamilyKnows/src/hooks

# Copy hooks
Copy-Item "MANUAL_COPY_FILES\fk-family-setup-glassmorphism\FamilyKnows\src\hooks\useRelationships.ts" -Destination "FamilyKnows\src\hooks\" -Force
Copy-Item "MANUAL_COPY_FILES\fk-family-setup-glassmorphism\FamilyKnows\src\hooks\useInvitations.ts" -Destination "FamilyKnows\src\hooks\" -Force

STEP 3: Copy Updated Screen
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Copy-Item "MANUAL_COPY_FILES\fk-family-setup-glassmorphism\FamilyKnows\src\features\onboarding\screens\FamilySetupScreen.tsx" -Destination "FamilyKnows\src\features\onboarding\screens\" -Force

STEP 4: Update api.ts (MANUAL EDIT)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Open: FamilyKnows/src/services/api.ts

Add this after line 422 (after WORKSPACE section, before closing brace):

  MASTERDATA: {
    CATEGORIES: '/api/masterdata/categories',
    CATEGORY_DETAILS: (categoryId: string) => `/api/masterdata/categories/${categoryId}/details`,
  },

STEP 5: Install Dependencies (if needed)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd FamilyKnows
npm install expo-blur expo-linear-gradient
cd ..

STEP 6: Start Dev Server & Test
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd FamilyKnows
npx expo start

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONSTELLATION MODE (Onboarding Flow):
- [ ] Center orb shows workspace name from currentTenant
- [ ] 6 relationship bubbles float with animation
- [ ] Tapping bubble opens invite modal
- [ ] WhatsApp/Email/SMS tabs work
- [ ] Contact input accepts email or phone
- [ ] Send invitation creates API call
- [ ] Toast shows success/error
- [ ] Skip button navigates to Pricing

MANAGEMENT MODE (From Settings):
- [ ] Shows workspace name in header
- [ ] Active members list shows self as Host
- [ ] Pending invitations show with Nudge button
- [ ] Nudge button resends invitation
- [ ] Add Member button switches to constellation mode
- [ ] Share Hub button opens share sheet
- [ ] Done button goes back

API INTEGRATION:
- [ ] Relationships fetch from /api/masterdata/categories
- [ ] Invitations list from /api/users/invitations
- [ ] Create invitation works
- [ ] Resend invitation works

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â¸ï¸ WAITING FOR CONFIRMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Test locally and confirm:
  â†’ "Tested, working - proceed with merge"
  â†’ "Issue found: [describe problem]"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Production Checklist:
  âœ… Transaction Management: N/A (API handles)
  âœ… Race Condition Handling: Loading states prevent double-submit
  âœ… Error Handling: Try-catch with toast notifications
  âœ… Toasts: Using existing Toast component
  âœ… Loaders: ActivityIndicator during API calls
