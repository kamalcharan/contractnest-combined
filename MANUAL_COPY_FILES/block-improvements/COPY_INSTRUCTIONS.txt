═══════════════════════════════════════════════════
COPY INSTRUCTIONS - Block Improvements (Complete)
═══════════════════════════════════════════════════

Includes:
- Reusable FileUploader component using useStorageManagement hook
- IconPicker with custom icon upload support (Option B)
- New storage categories for blocks
- Fix HTML tag display issue (<p> tags showing in descriptions)
- Updated ImageUploadStep and MediaStep to use FileUploader
- Centralized block field validation constants
- Updated BasicInfoStep, ContentStep, ItemsStep with validations
- TEXT BLOCK: Consolidated to single page (Name, Icon, RichText)
- VIDEO BLOCK: Consolidated to single page (Name, Icon, Video, Settings)

═══════════════════════════════════════════════════
FILES TO COPY
═══════════════════════════════════════════════════

--- COMMON COMPONENTS ---

1. FileUploader.tsx (NEW - reusable upload component)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/common/FileUploader.tsx
   Destination: contractnest-ui/src/components/common/FileUploader.tsx

--- CONSTANTS ---

2. storageConstants.ts (UPDATED - new storage categories)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/utils/constants/storageConstants.ts
   Destination: contractnest-ui/src/utils/constants/storageConstants.ts

3. blockValidation.ts (NEW - field validation constants)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/utils/constants/blockValidation.ts
   Destination: contractnest-ui/src/utils/constants/blockValidation.ts

--- CATALOG STUDIO COMPONENTS ---

4. IconPicker.tsx (UPDATED - custom icon upload support)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/IconPicker.tsx
   Destination: contractnest-ui/src/components/catalog-studio/IconPicker.tsx

--- PAGES (HTML FIX) ---

5. template.tsx (UPDATED - fix HTML display)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/pages/catalog-studio/template.tsx
   Destination: contractnest-ui/src/pages/catalog-studio/template.tsx

6. blocks.tsx (UPDATED - fix HTML display)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/pages/catalog-studio/blocks.tsx
   Destination: contractnest-ui/src/pages/catalog-studio/blocks.tsx

--- BLOCK WIZARD STEPS ---

7. BasicInfoStep.tsx (UPDATED - field validations)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/steps/BasicInfoStep.tsx
   Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/BasicInfoStep.tsx

8. ImageUploadStep.tsx (UPDATED - uses FileUploader)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/steps/media/ImageUploadStep.tsx
   Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/media/ImageUploadStep.tsx

9. MediaStep.tsx (UPDATED - uses FileUploader)
   Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/steps/media/MediaStep.tsx
   Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/media/MediaStep.tsx

10. ContentStep.tsx (UPDATED - field validations)
    Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/steps/content/ContentStep.tsx
    Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/content/ContentStep.tsx

11. ItemsStep.tsx (UPDATED - checklist validations)
    Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/steps/checklist/ItemsStep.tsx
    Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/steps/checklist/ItemsStep.tsx

--- WIZARD CONFIGURATION ---

12. wizard-data.ts (UPDATED - Text Block 2 steps, Video Block 2 steps)
    Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/utils/catalog-studio/wizard-data.ts
    Destination: contractnest-ui/src/utils/catalog-studio/wizard-data.ts

13. BlockWizardContent.tsx (UPDATED - Text/Video handled at step 2)
    Source: MANUAL_COPY_FILES/block-improvements/contractnest-ui/src/components/catalog-studio/BlockWizard/BlockWizardContent.tsx
    Destination: contractnest-ui/src/components/catalog-studio/BlockWizard/BlockWizardContent.tsx

--- DOCUMENTATION ---

14. CT_delivery.md (UPDATED - v3.0 improvements logged)
    Source: MANUAL_COPY_FILES/block-improvements/ClaudeDocumentation/contractUI/CT_delivery.md
    Destination: ClaudeDocumentation/contractUI/CT_delivery.md

15. CT_Handover.md (UPDATED - v3.0 improvements logged)
    Source: MANUAL_COPY_FILES/block-improvements/ClaudeDocumentation/contractUI/CT_Handover.md
    Destination: ClaudeDocumentation/contractUI/CT_Handover.md

═══════════════════════════════════════════════════
SUBMODULES AFFECTED
═══════════════════════════════════════════════════
- contractnest-ui
- ClaudeDocumentation

═══════════════════════════════════════════════════
CHANGES SUMMARY
═══════════════════════════════════════════════════

1. FileUploader.tsx (NEW):
   - Reusable file upload component
   - Uses useStorageManagement hook
   - Drag-and-drop support
   - File type and size validation
   - Upload progress indicator
   - Preview for uploaded files

2. storageConstants.ts (UPDATED):
   - Added 'block_icons' category (PNG, SVG, JPEG - 512KB max)
   - Added 'block_videos' category (MP4, WebM, MOV - 100MB max)
   - Added 'block_images' category (JPEG, PNG, WebP, GIF - 5MB max)

3. blockValidation.ts (NEW):
   - Centralized field length limits:
     * name: 255 chars
     * description: 2000 chars
     * content: 10000 chars
     * tags: 20 max, 50 chars each
     * sku: 50 chars
     * terms: 1000 chars
     * checklistItem: 500 chars, max 50 items
     * mediaUrl/thumbnailUrl: 2000 chars
     * altText: 255 chars
     * caption: 500 chars
   - Helper functions: getCharCountDisplay, validateFieldLength

4. IconPicker.tsx (UPDATED):
   - Added "Custom Upload" tab alongside "Lucide Icons"
   - Custom icons uploaded to 'block_icons' storage category
   - Option B: icon field + customIconUrl field
   - New props: customIconUrl, onCustomIconChange, allowCustomUpload

5. template.tsx (UPDATED):
   - Import stripHtml from utils/catalog-studio
   - Fixed 3 locations where block.description showed HTML tags

6. blocks.tsx (UPDATED):
   - Import stripHtml from utils/catalog-studio
   - Fixed 3 locations where block.description showed HTML tags

7. BasicInfoStep.tsx (UPDATED):
   - Uses BLOCK_FIELD_LIMITS for name, sku, tags
   - Character count display with warning colors
   - Input handlers enforce max lengths

8. ImageUploadStep.tsx (UPDATED):
   - Uses FileUploader component for image uploads
   - Uses 'block_images' storage category
   - Supports JPEG, PNG, WebP, GIF (max 5MB)

9. MediaStep.tsx (UPDATED - VIDEO BLOCK SINGLE PAGE):
   - VIDEO BLOCK now shows single page with: Name, Icon, Video source, Display Settings
   - Uses FileUploader for video uploads
   - Uses 'block_videos' storage category
   - YouTube/Vimeo embed preview functionality
   - Collapsible Display Settings section

10. ContentStep.tsx (UPDATED - TEXT BLOCK SINGLE PAGE):
    - TEXT BLOCK now shows single page with: Name, Icon, RichText
    - No separate BasicInfo step for text blocks
    - Uses BLOCK_FIELD_LIMITS for content (10000 chars)
    - Character count with warning/error colors

11. ItemsStep.tsx (UPDATED):
    - Max 50 checklist items
    - Each item max 500 chars
    - Character count for items nearing limit
    - Disabled add button when max reached

12. wizard-data.ts (UPDATED):
    - TEXT BLOCK: Reduced from 4 steps to 2 steps (Type, Content)
    - VIDEO BLOCK: Reduced from 4 steps to 2 steps (Type, Media)

13. BlockWizardContent.tsx (UPDATED):
    - Text block rendered at step 2 via ContentStep (skips BasicInfo)
    - Video block rendered at step 2 via MediaStep (skips BasicInfo)

═══════════════════════════════════════════════════
POWERSHELL COPY COMMANDS
═══════════════════════════════════════════════════

# Create directories if needed
New-Item -ItemType Directory -Force -Path "contractnest-ui\src\components\common"
New-Item -ItemType Directory -Force -Path "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\media"
New-Item -ItemType Directory -Force -Path "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\content"
New-Item -ItemType Directory -Force -Path "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\checklist"
New-Item -ItemType Directory -Force -Path "contractnest-ui\src\utils\constants"

# Copy all files
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\common\FileUploader.tsx" -Destination "contractnest-ui\src\components\common\FileUploader.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\utils\constants\storageConstants.ts" -Destination "contractnest-ui\src\utils\constants\storageConstants.ts" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\utils\constants\blockValidation.ts" -Destination "contractnest-ui\src\utils\constants\blockValidation.ts" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\IconPicker.tsx" -Destination "contractnest-ui\src\components\catalog-studio\IconPicker.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\pages\catalog-studio\template.tsx" -Destination "contractnest-ui\src\pages\catalog-studio\template.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\pages\catalog-studio\blocks.tsx" -Destination "contractnest-ui\src\pages\catalog-studio\blocks.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\steps\BasicInfoStep.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\BasicInfoStep.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\steps\media\ImageUploadStep.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\media\ImageUploadStep.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\steps\media\MediaStep.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\media\MediaStep.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\steps\content\ContentStep.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\content\ContentStep.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\steps\checklist\ItemsStep.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\steps\checklist\ItemsStep.tsx" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\utils\catalog-studio\wizard-data.ts" -Destination "contractnest-ui\src\utils\catalog-studio\wizard-data.ts" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\contractnest-ui\src\components\catalog-studio\BlockWizard\BlockWizardContent.tsx" -Destination "contractnest-ui\src\components\catalog-studio\BlockWizard\BlockWizardContent.tsx" -Force

# Documentation
Copy-Item "MANUAL_COPY_FILES\block-improvements\ClaudeDocumentation\contractUI\CT_delivery.md" -Destination "ClaudeDocumentation\contractUI\CT_delivery.md" -Force
Copy-Item "MANUAL_COPY_FILES\block-improvements\ClaudeDocumentation\contractUI\CT_Handover.md" -Destination "ClaudeDocumentation\contractUI\CT_Handover.md" -Force

Write-Host "All files copied!" -ForegroundColor Green

═══════════════════════════════════════════════════
FIELD VALIDATION LIMITS REFERENCE
═══════════════════════════════════════════════════

| Field           | Max Length | Notes                    |
|-----------------|------------|--------------------------|
| name            | 255        | Required                 |
| description     | 2000       | Rich text, required      |
| content         | 10000      | Text blocks              |
| tags            | 50 each    | Max 20 tags              |
| sku             | 50         | Spare blocks             |
| terms           | 1000       | Service/Spare blocks     |
| checklistItem   | 500        | Max 50 items             |
| mediaUrl        | 2000       | Video/Image URLs         |
| thumbnailUrl    | 2000       | Video thumbnails         |
| altText         | 255        | Image accessibility      |
| caption         | 500        | Image captions           |
| duration        | 10         | e.g., "5:30"             |

═══════════════════════════════════════════════════
