===============================================
 SERVICE EXECUTION DRAWER — Step 3 (v3)
===============================================

Files:
  1. contractnest-ui/src/components/contracts/ServiceExecutionDrawer.tsx (NEW)
     - Complete 2-column service execution drawer
     - Left: Event cards with inline status, add from contract, beyond scope, notes
     - Right: Evidence section driven by contract evidence policy (none/upload/smart_form)
     - Beyond Scope: opens BeyondScopePanel with pricing-only blocks + FlyBy support
     - FlyBy labels: "FlyBy Service" / "FlyBy Spare Part" (matches contract wizard pattern)
     - Evidence reads from contract's evidence_policy_type and evidence_selected_forms
     - Fixed: solid background using primaryBackground (was mainBackground=undefined)
     - Fixed: backdrop opacity 0.5

  2. contractnest-ui/src/components/contracts/OperationsTab.tsx (MODIFIED)
     - Removed inline ServiceExecutionPanel (310+ lines deleted)
     - Imported and wired new ServiceExecutionDrawer
     - Added useContract(contractId) to fetch contract evidence policy
     - Passes actual evidencePolicyType + evidenceSelectedForms from contract data
     - Passes statusDefsByType and transitionsByType

  3. contractnest-ui/src/types/contracts.ts (MODIFIED)
     - Added evidence_policy_type field to Contract interface
     - Added evidence_selected_forms field to Contract interface

  4. contractnest-edge/supabase/migrations/contracts/029_add_evidence_policy_columns.sql (NEW)
     - ALTER TABLE t_contracts: adds evidence_policy_type VARCHAR(20) DEFAULT 'none'
     - ALTER TABLE t_contracts: adds evidence_selected_forms JSONB DEFAULT '[]'
     - CHECK constraint: evidence_policy_type IN ('none', 'upload', 'smart_form')
     - CREATE OR REPLACE create_contract_transaction: inserts evidence fields from payload
     - CREATE OR REPLACE get_contract_by_id: returns evidence fields in response
     *** APPLY THIS MIGRATION FIRST before testing evidence in the drawer ***

Submodules Affected: contractnest-ui, contractnest-edge

═══════════════════════════════════════════════
STEP 1: Apply the DB migration (Supabase SQL Editor)
═══════════════════════════════════════════════
  - Open Supabase Dashboard → SQL Editor
  - Paste and run the contents of:
    MANUAL_COPY_FILES/service-execution-drawer/contractnest-edge/supabase/migrations/contracts/029_add_evidence_policy_columns.sql
  - This adds the columns + updates the RPC functions

═══════════════════════════════════════════════
STEP 2: Copy UI files
═══════════════════════════════════════════════
Copy Command (PowerShell):
  cd "D:\projects\core projects\ContractNest\contractnest-combined"
  xcopy "MANUAL_COPY_FILES\service-execution-drawer\contractnest-ui" "contractnest-ui\" /S /Y

═══════════════════════════════════════════════
STEP 3: Copy Edge migration file
═══════════════════════════════════════════════
Copy Command (PowerShell):
  xcopy "MANUAL_COPY_FILES\service-execution-drawer\contractnest-edge" "contractnest-edge\" /S /Y

═══════════════════════════════════════════════
STEP 4: Test
═══════════════════════════════════════════════
  - Create a NEW contract with Evidence Policy = "Smart Form" or "Upload Proof"
  - Open service execution drawer on that contract
  - Verify evidence section shows the correct policy type
  - Verify "Beyond Scope" opens and shows FlyBy Service / FlyBy Spare Part buttons
  - For existing contracts: they'll default to 'none' (no verification)
